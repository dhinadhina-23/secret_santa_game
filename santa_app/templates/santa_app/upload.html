{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Employee CSV | Secret Santa</title>

    <link rel="stylesheet" href="{% static 'santa_app/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <div class="bg-pattern"></div>
    <div id="snowflakes-container"></div>

    <div class="christmas-tree">
        <div class="tree-top"></div>
        <div class="tree-middle"></div>
        <div class="tree-bottom"></div>
        <div class="tree-trunk"></div>
        <div class="bell"></div>
    </div>

    <div class="container">
        <h1>Secret Santa Employee Upload</h1>

        <div class="upload-instructions">
            <h3><i class="fas fa-info-circle"></i> Upload Instructions</h3>
            <p>
                Upload a CSV file containing employee names and email addresses.
                The system will automatically generate Secret Santa assignments
                while ensuring no one gets themselves.
            </p>
        </div>

        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}

            <div class="form-group">
                <label for="csv_file">
                    <i class="fas fa-file-csv"></i> Select CSV File
                </label>

                {{ form.csv_file }}

                {% if form.csv_file.errors %}
                    <div class="error-message">
                        {{ form.csv_file.errors.0 }}
                    </div>
                {% endif %}
            </div>

            <div style="text-align: center;">
                <button type="submit">
                    <i class="fas fa-upload"></i> Upload & Generate Assignments
                </button>
            </div>

            <div class="footer-note">
                <p><i class="fas fa-gift"></i> All assignments are randomly generated and kept confidential.</p>
            </div>
        </form>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const snowflakesContainer = document.getElementById('snowflakes-container');
            const snowflakeCount = 80;

            for (let i = 0; i < snowflakeCount; i++) {
                const snowflake = document.createElement('div');
                snowflake.classList.add('snowflake');

                const size = Math.random() * 7 + 3;
                snowflake.style.width = `${size}px`;
                snowflake.style.height = `${size}px`;
                snowflake.style.left = `${Math.random() * 100}vw`;

                const duration = Math.random() * 10 + 5;
                snowflake.style.animationDuration = `${duration}s`;
                snowflake.style.animationDelay = `${Math.random() * 5}s`;
                snowflake.style.opacity = Math.random() * 0.7 + 0.3;

                snowflakesContainer.appendChild(snowflake);
            }
        });

    </script>

</body>
</html>


